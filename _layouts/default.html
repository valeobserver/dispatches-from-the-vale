<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{{ page.title | default: "Dispatches from the Vale" }}</title>

  <link rel="icon" href="{{ '/assets/favicon.ico' | relative_url }}">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --bg: #0a0a0a;
      --fg: #ffffff;
      --fg-dim: #ffffff;
      --accent: #BD4700;
      --border: #1a1410;
      --mono: 'IBM Plex Mono', monospace;
      --sans: 'IBM Plex Sans', sans-serif;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    html { font-size: 15px; }

    body {
      background: var(--bg);
      color: var(--fg);
      font-family: var(--sans);
      line-height: 1.6;
      min-height: 100vh;
    }

    header {
      border-bottom: 4px solid var(--accent);
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      background: var(--bg);
      z-index: 100;
    }

    .site-title {
      font-family: var(--mono);
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--fg);
      text-decoration: none;
    }

    .site-title:hover { color: var(--accent); }

    main {
      max-width: 1000px;
      margin: 0 auto;
      padding: 4rem 3rem;
    }

        .hero {
            margin-bottom: 5rem;
            display: flex;
            gap: 3rem;
            align-items: stretch;
        }

        .hero-index {
            font-size: 5rem;
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            line-height: 0.85;
            color: var(--fg);
            margin-left: -0.05em;
            opacity: 0.85;
        }

    .hero-text {
  font-family: var(--mono);          /* ← critical */
  font-weight: 400;
  font-size: 0.95rem;                /* slightly smaller = quieter */
  line-height: 1.85;
  color: var(--fg-dim);
  max-width: 560px;
  display: flex;
  align-items: center;
  letter-spacing: 0.02em;
  text-align: left;                  /* ← critical */
}

    footer {
      margin-top: 5rem;
      margin-bottom: 5rem;
      padding-top: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2rem;
    }

    .footer-text {
      font-size: 0.6rem;
      color: var(--fg);
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    .tag {
      font-family: var(--mono);
      font-size: 0.6rem;
      letter-spacing: 0.05em;
      color: var(--accent);
      background: #000;
      padding: 0.25rem 0.5rem;
      text-transform: uppercase;
    }

    hr {
      border: none;
      border-top: 1px solid var(--accent);
      opacity: 0.35;
      margin: 2.2rem 0 0;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

        .hero {
            animation: fadeIn 0.6s ease-out;
        }

        .post {
            animation: fadeIn 0.5s ease-out backwards;
        }

        .post:nth-child(1) { animation-delay: 0.1s; }
        .post:nth-child(2) { animation-delay: 0.15s; }

        @media (max-width: 768px) {
            header {
                padding: 1.5rem;
                flex-direction: column;
                gap: 0.25rem;
                align-items: flex-start;
            }

            main {
                padding: 2rem 1.5rem;
            }

            .hero {
                flex-direction: column;
                gap: 1.5rem;
            }

            .hero-index {
                font-size: 4rem;
                line-height: 1;
            }

            .hero-content {
                padding-top: 0;
            }

            .post {
                padding: 0;
            }

            .post-image {
                height: 200px;
            }

            .post-title {
                font-size: 1.3rem;
            }
        }

  </style>
</head>

<body>

<header>
  <a href="/" class="site-title">Dispatches from the Vale</a>
</header>

<main>
  {% if page.url == "/" or page.url == "/index.html" %}

  {% assign dispatch_count = site.posts | size %}
  
  <section class="hero">
    <div class="hero-index">
      {{ dispatch_count | prepend: "0" | slice: -2, 2 }}
    </div>
    <p class="hero-text">
      Observations written in transit. Between projects, jurisdictions, systems. No schedule. No assumed audience.
    </p>
  </section>

{% endif %}
  
  {{ content }}
</main>

<footer>
  <button id="agartha-toggle"
    style="font-family: var(--mono); font-size: 0.6rem; letter-spacing: 0.1em;
           background: transparent; border: 1px solid var(--accent);
           color: var(--accent); padding: 0.5rem 1rem; cursor: pointer;
           text-transform: uppercase; transition: all 0.3s;">
    Enter Agartha
  </button>

  <span class="footer-text">© 2026 Vale Observer // Nothing here is advice</span>
</footer>

<script>
const toggle = document.getElementById('agartha-toggle');
const root = document.documentElement;

const currentTheme = localStorage.getItem('theme');
if (currentTheme === 'agartha') applyAgartha();

toggle.addEventListener('click', () => {
  if (root.style.getPropertyValue('--bg') === '#ffffff') {
    applySurface();
    localStorage.setItem('theme', 'surface');
  } else {
    applyAgartha();
    localStorage.setItem('theme', 'agartha');
  }
});

function applyAgartha() {
  root.style.setProperty('--bg', '#ffffff');
  root.style.setProperty('--fg', '#0a0a0a');
  root.style.setProperty('--fg-dim', '#0a0a0a');
  toggle.textContent = 'Exit Agartha';
}

function applySurface() {
  root.style.setProperty('--bg', '#0a0a0a');
  root.style.setProperty('--fg', '#ffffff');
  root.style.setProperty('--fg-dim', '#ffffff');
  toggle.textContent = 'Enter Agartha';
}
</script>

</body>
</html>
